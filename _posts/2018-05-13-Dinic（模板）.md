---
layout:     post
title:      "Dinic（模板）"
subtitle:   "网络流"
date:       2018-05-13
author:     "JU"
header-img: "img/post-bg-2015.jpg"
mathjax:    false
catalog:    true
tags:
    - 网络流
---

#### POJ1273
	#include <bits/stdc++.h>
	const int M=500100,N=100100;
	const int oo=2147480000;
	using namespace std;
	struct EDGE
	{
		int v,nx,len;
	}lb[M];
	int top[N],tot=1;
	void add (int u,int v,int len)
	{
		lb[++tot].v=v,lb[tot].len=len,lb[tot].nx=top[u],top[u]=tot;
		lb[++tot].v=u,lb[tot].len= 0 ,lb[tot].nx=top[v],top[v]=tot;
	}
	int d[N],s,t;
	queue <int> q;
	bool bfs ()
	{
		bool LYL=0;
		memset (d,0,sizeof (d));
		while (q.size()) q.pop();
		q.push(s); d[s]=1;
		while (q.size())
		{
			int u=q.front();
			for (int kb=top[u]; kb; kb=lb[kb].nx)
			{
				int v=lb[kb].v,len=lb[kb].len;
				if (len&&!d[v])
				{
					d[v]=d[u]+1,q.push (v);
					if (v==t) LYL=1;
				}
			}
			q.pop();
		}
		return LYL;
	}
	int dinic (int u,int flow)
	{
		if (u==t) return flow;
		int rest=flow,k;
		for (int kb=top[u]; kb; kb=lb[kb].nx)
		{
			int v=lb[kb].v,len=lb[kb].len;
			if (d[u]+1==d[v]&&len)
			{
				int sb=min (rest,len);
				k=dinic (v,sb);
				if (!k) d[v]=0;
				lb[kb].len-=k;
				lb[kb^1].len+=k;
				rest-=k;
			}
		}
		return flow-rest;
	}
	int main()
	{
		int n,m;
		while (~scanf("%d %d", &m, &n))
		{
			memset (top,0,sizeof (top));
			tot=1;
			s=1,t=n;
			for (int i=1; i<=m; i++)
			{
				int u,v,l;
				cin>>u>>v>>l;
				add (u,v,l);
			}
			int flow=0,ans=0;
			while (bfs ())
			while (flow=dinic (s,oo)) ans+=flow;
			cout<<ans
			<<endl;
		}
		
		return 0;
	}
